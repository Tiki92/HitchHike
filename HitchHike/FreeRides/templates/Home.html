{% extends "base.html" %}
	{% load staticfiles %}

  {% load leaflet_tags %}
  {% leaflet_js %}
  {% leaflet_css %}
      
      
      
		  {% block content %}
						{% leaflet_map "map" callback="window.map_init_basic" %}
                       
          {% endblock %}

    {% block list %}

    {% for i in "x"|rjust:"12" %}
    <div class="col-lg-4 col-md-6 mb-4">
      <div class="card h-100">
        <a href="#"><img class="card-img-top" src="http://placehold.it/700x400" alt=""></a>
        <div class="card-body">
          <h4 class="card-title">
            <a id="item{{ forloop.counter }}" href="#">Item</a>
          </h4>
          <h5>$24.99</h5>
          <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Amet numquam aspernatur!</p>
        </div>
        <div class="card-footer">
          <small class="text-muted">&#9733; &#9733; &#9733; &#9733; &#9734;</small>
        </div>
      </div>
</div>
{% endfor %} 

		{% endblock %}


{% block script %}

<script type="text/javascript">

    function map_init_basic (map, options) {

		var markers = L.markerClusterGroup();
		for (var i = 0; i < {{ dec_loc|safe }}['features'].length; i++) {

			var a = {{ dec_loc|safe }}['features'][i]['geometry']['coordinates'];
			var title = {{ dec_loc|safe }}['features'][i]['properties']['location_name'];
			var marker = L.marker(new L.LatLng(a[1], a[0]), { title: title });
			marker.bindPopup(title);
			markers.addLayer(marker);
		}
        map.scrollWheelZoom.disable();

        map.on('click', function() {
            map.scrollWheelZoom.enable();
        });

		map.addLayer(markers);


}

for(var j = 0; j <= 11; j++) {
    var title = {{ dec_loc|safe }}['features'][j]['properties']['location_name'];
    j += 1;
    document.getElementById("item" + j).innerHTML = title;
    j -= 1;
}

</script>

{% endblock %}